SET FOREIGN_KEY_CHECKS = 0;


CREATE TABLE `log_Pay` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `project_id` int(10) unsigned NOT NULL DEFAULT '0',
  `ext_id` varchar(150) NOT NULL DEFAULT '',
  `stamp` int(15) NOT NULL DEFAULT '0',
  `item_id` int(15) NOT NULL DEFAULT '0',
  `value` int(15) NOT NULL DEFAULT '0',
  `level` int(5) unsigned NOT NULL DEFAULT '0',
  `session` int(10) unsigned NOT NULL DEFAULT '0',
  `return` int(10) unsigned NOT NULL DEFAULT '0',
  `energy` int(10) unsigned NOT NULL DEFAULT '0',
  `real` int(10) unsigned NOT NULL DEFAULT '0',
  `bonus` int(10) unsigned NOT NULL DEFAULT '0',
  `money` int(10) unsigned NOT NULL DEFAULT '0',
  `referal` varchar(150) NOT NULL DEFAULT '',
  `reg_time` int(15) unsigned NOT NULL DEFAULT '0',
  `sex` int(1) unsigned DEFAULT '0',
  `age` int(3) unsigned DEFAULT '0',
  `fb_source` varchar(45) DEFAULT '',
  `country` varchar(45) DEFAULT '',
  PRIMARY KEY (`id`,`stamp`),
  KEY `id` (`id`),
  KEY `stamp` (`stamp`),
  KEY `s_i` (`stamp`,`item_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

ALTER TABLE `log_Pay`
PARTITION BY RANGE (stamp) (
  PARTITION a01 VALUES LESS THAN (UNIX_TIMESTAMP('2013-01-01 00:00:00')), 
  PARTITION a02 VALUES LESS THAN (UNIX_TIMESTAMP('2013-02-01 00:00:00')), 
  PARTITION a03 VALUES LESS THAN (UNIX_TIMESTAMP('2013-03-01 00:00:00')), 
  PARTITION a04 VALUES LESS THAN (UNIX_TIMESTAMP('2013-04-01 00:00:00')), 
  PARTITION a05 VALUES LESS THAN (UNIX_TIMESTAMP('2013-05-01 00:00:00')), 
  PARTITION a06 VALUES LESS THAN (UNIX_TIMESTAMP('2013-06-01 00:00:00')), 
  PARTITION a07 VALUES LESS THAN (UNIX_TIMESTAMP('2013-07-01 00:00:00')), 
  PARTITION a08 VALUES LESS THAN (UNIX_TIMESTAMP('2013-08-01 00:00:00')), 
  PARTITION a09 VALUES LESS THAN (UNIX_TIMESTAMP('2013-09-01 00:00:00')), 
  PARTITION a10 VALUES LESS THAN (UNIX_TIMESTAMP('2013-10-01 00:00:00')), 
  PARTITION a11 VALUES LESS THAN (UNIX_TIMESTAMP('2013-11-01 00:00:00')), 
  PARTITION a12 VALUES LESS THAN (UNIX_TIMESTAMP('2013-12-01 00:00:00')), 
  PARTITION a13 VALUES LESS THAN (UNIX_TIMESTAMP('2014-01-01 00:00:00')), 
  PARTITION a14 VALUES LESS THAN (UNIX_TIMESTAMP('2015-02-01 00:00:00')), 
  PARTITION a15 VALUES LESS THAN (UNIX_TIMESTAMP('2016-03-01 00:00:00')) 
);

SET FOREIGN_KEY_CHECKS = 1;
